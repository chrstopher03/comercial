<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>VogueCrest - Carrito</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet" />
  <style>
    :root {
      --clr-bg: #121212;
      --clr-text: #eee;
      --clr-accent: #ff6a59;
      --clr-shadow: rgba(0,0,0,0.7);
      --font-main: 'Segoe UI', sans-serif;
    }
    * { box-sizing: border-box; margin:0; padding:0; }
    body {
      font-family: var(--font-main);
      background: var(--clr-bg);
      color: var(--clr-text);
      min-height: 100vh;
      padding: 1rem;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    header {
      width: 100%;
      max-width: 600px;
      text-align: center;
      margin-bottom: 1rem;
    }
    header img {
      width: 110px;
      border-radius: 12px;
      filter: drop-shadow(0 0 6px var(--clr-accent));
    }
    h1 {
      margin-top: 0.5rem;
      font-weight: 900;
      color: var(--clr-accent);
      letter-spacing: 2px;
    }
    main {
      width: 100%;
      max-width: 600px;
      background: #222;
      border-radius: 12px;
      padding: 1rem;
      box-shadow: 0 0 12px var(--clr-shadow);
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      gap: 1rem;
      overflow-y: auto;
      max-height: 70vh;
    }
    .item {
      display: flex;
      gap: 1rem;
      background: #333;
      border-radius: 10px;
      padding: 0.75rem;
      align-items: center;
    }
    .item img {
      width: 80px;
      height: 80px;
      object-fit: cover;
      border-radius: 8px;
      flex-shrink: 0;
      box-shadow: 0 0 6px var(--clr-accent);
    }
    .info {
      flex-grow: 1;
      color: #ddd;
    }
    .info h3 {
      margin-bottom: 0.3rem;
      font-weight: 700;
      font-size: 1.1rem;
    }
    .info p {
      font-size: 0.9rem;
      color: #bbb;
      margin-bottom: 0.5rem;
    }
    .quantity-controls {
      display: flex;
      gap: 0.5rem;
      align-items: center;
    }
    .quantity-controls button {
      background: var(--clr-accent);
      border: none;
      color: var(--clr-bg);
      font-weight: 700;
      padding: 0.2rem 0.6rem;
      border-radius: 6px;
      font-size: 1rem;
      cursor: pointer;
      user-select: none;
      transition: background 0.3s;
    }
    .quantity-controls button:hover {
      background: #ff856f;
    }
    .quantity-controls span {
      min-width: 24px;
      text-align: center;
      font-weight: 700;
      font-size: 1.1rem;
    }
    .subtotal {
      font-weight: 700;
      color: var(--clr-accent);
      min-width: 70px;
      text-align: right;
    }
    .total {
      font-weight: 900;
      font-size: 1.3rem;
      text-align: right;
      margin-top: 1rem;
      color: var(--clr-accent);
    }
    button#pagar {
      margin-top: 1rem;
      width: 100%;
      padding: 1rem;
      background: var(--clr-accent);
      border: none;
      border-radius: 12px;
      color: var(--clr-bg);
      font-weight: 900;
      font-size: 1.1rem;
      cursor: pointer;
      box-shadow: 0 0 8px var(--clr-accent);
      transition: background 0.3s;
    }
    button#pagar:hover {
      background: #ff856f;
    }

    /* Formulario pago modal */
    #modalPago {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.85);
      display: none;
      align-items: center;
      justify-content: center;
      padding: 1rem;
      z-index: 9999;
    }
    #modalPago.active {
      display: flex;
    }
    #modalPago form {
      background: #222;
      padding: 1.5rem;
      border-radius: 12px;
      width: 100%;
      max-width: 400px;
      color: #eee;
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }
    #modalPago label {
      font-weight: 700;
      font-size: 0.9rem;
    }
    #modalPago input, #modalPago select {
      padding: 0.6rem;
      border-radius: 8px;
      border: none;
      font-size: 1rem;
    }
    #modalPago button {
      padding: 0.8rem;
      border: none;
      border-radius: 8px;
      background: var(--clr-accent);
      color: var(--clr-bg);
      font-weight: 900;
      font-size: 1.1rem;
      cursor: pointer;
      box-shadow: 0 0 6px var(--clr-accent);
      transition: background 0.3s;
    }
    #modalPago button:hover {
      background: #ff856f;
    }
    #modalPago .cerrar {
      background: #aa2222;
      margin-top: 0;
    }
    #modalPago .cerrar:hover {
      background: #dd4444;
    }

    /* Responsive mobile */
    @media (max-width: 480px) {
      body {
        padding: 0.5rem;
      }
      main {
        max-height: 60vh;
        padding: 0.5rem;
      }
      .item img {
        width: 60px;
        height: 60px;
      }
      .subtotal {
        min-width: 50px;
        font-size: 0.9rem;
      }
      button#pagar {
        padding: 0.8rem;
        font-size: 1rem;
      }
    }
  </style>
</head>
<body>

  <header>
    <img src="Think-removebg-preview.png" alt="VogueCrest Logo" />
    <h1>Tu carrito</h1>
  </header>

  <main id="carrito-contenedor">
    <!-- Aquí se listarán los productos -->
  </main>

  <div class="total" id="total">Total: $0.00</div>
  <button id="pagar">Pagar</button>

  <!-- Modal pago -->
  <div id="modalPago" role="dialog" aria-modal="true" aria-labelledby="tituloPago">
    <form id="formPago">
      <h2 id="tituloPago">Completa tu compra</h2>
      <label for="nombre">Nombre completo</label>
      <input type="text" id="nombre" name="nombre" required autocomplete="name" />
      <label for="direccion">Dirección de envío</label>
      <input type="text" id="direccion" name="direccion" required autocomplete="street-address" />
      <label for="metodoPago">Método de pago</label>
      <select id="metodoPago" name="metodoPago" required>
        <option value="">Selecciona...</option>
        <option value="tarjeta">Tarjeta de crédito/débito</option>
        <option value="paypal">PayPal</option>
        <option value="contraEntrega">Pago contra entrega</option>
      </select>
      <button type="submit">Confirmar pago</button>
      <button type="button" class="cerrar" id="cerrarModal">Cancelar</button>
    </form>
  </div>

<script>
  const carritoContenedor = document.getElementById('carrito-contenedor');
  const totalDisplay = document.getElementById('total');
  const btnPagar = document.getElementById('pagar');
  const modalPago = document.getElementById('modalPago');
  const formPago = document.getElementById('formPago');
  const cerrarModal = document.getElementById('cerrarModal');

  let carrito = JSON.parse(localStorage.getItem('vc_carrito')) || [];

  function renderizarCarrito() {
    carritoContenedor.innerHTML = '';
    if(carrito.length === 0){
      carritoContenedor.innerHTML = '<p>Tu carrito está vacío.</p>';
      totalDisplay.textContent = 'Total: $0.00';
      btnPagar.disabled = true;
      return;
    }
    btnPagar.disabled = false;

    let total = 0;
    carrito.forEach((item, index) => {
      const subtotal = item.precio * item.cantidad;
      total += subtotal;

      const div = document.createElement('div');
      div.className = 'item';
      div.innerHTML = `
        <img src="${item.img}" alt="${item.nombre}" />
        <div class="info">
          <h3>${item.nombre}</h3>
          <p>Precio: $${item.precio.toFixed(2)}</p>
          <div class="quantity-controls">
            <button aria-label="Disminuir cantidad" data-index="${index}" class="btn-disminuir">-</button>
            <span>${item.cantidad}</span>
            <button aria-label="Aumentar cantidad" data-index="${index}" class="btn-aumentar">+</button>
          </div>
        </div>
        <div class="subtotal">$${subtotal.toFixed(2)}</div>
      `;
      carritoContenedor.appendChild(div);
    });
    totalDisplay.textContent = `Total: $${total.toFixed(2)}`;
  }

  // Eventos para aumentar/disminuir cantidad
  carritoContenedor.addEventListener('click', e => {
    if(e.target.classList.contains('btn-aumentar')){
      const i = parseInt(e.target.dataset.index);
      carrito[i].cantidad++;
      guardarYCargar();
    }
    if(e.target.classList.contains('btn-disminuir')){
      const i = parseInt(e.target.dataset.index);
      carrito[i].cantidad--;
      if(carrito[i].cantidad <= 0){
        carrito.splice(i,1);
      }
      guardarYCargar();
    }
  });

  function guardarYCargar(){
    localStorage.setItem('vc_carrito', JSON.stringify(carrito));
    renderizarCarrito();
  }

  // Mostrar modal pago
  btnPagar.addEventListener('click', () => {
    modalPago.classList.add('active');
  });

  // Cerrar modal
  cerrarModal.addEventListener('click', () => {
    modalPago.classList.remove('active');
  });

  // Enviar formulario pago
  formPago.addEventListener('submit', (e) => {
    e.preventDefault();
    const nombre = formPago.nombre.value.trim();
    const direccion = formPago.direccion.value.trim();
    const metodoPago = formPago.metodoPago.value;

    if(!nombre || !direccion || !metodoPago){
      alert('Por favor completa todos los campos.');
      return;
    }

    alert(`Gracias por tu compra, ${nombre}!\nTu pedido será enviado a:\n${direccion}\nMétodo de pago: ${metodoPago}`);

    // Vaciar carrito
    carrito = [];
    localStorage.removeItem('vc_carrito');
    renderizarCarrito();
    modalPago.classList.remove('active');
  });

  // Cargar carrito al inicio
  renderizarCarrito();
</script>
</body>
</html>
